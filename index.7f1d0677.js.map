{"mappings":"AAAO,MAGMA,EAAuB,CAClCC,IAHoB,qCAIpBC,SAAU,KACVC,WAAY,QACZC,YAAa,aACbC,WAAY,QCNCC,eAAAC,GAA2BC,YAAEA,EAAc,GAAEC,KAAEA,EAAO,MACnE,IACE,MAAMC,EAAc,IAAIC,gBAAgB,IACnCX,E,KACHS,EACAG,EAAGJ,IAECK,QAAiBC,MAAM,2BAAcJ,KAC3C,IAAKG,EAASE,GAAI,CAChB,GAAwB,MAApBF,EAASG,OACX,OAEF,MAAO,CAAEC,MAAOJ,EAASG,O,CAE3B,MAAQE,KAAMC,SAAiBN,EAASO,OACxC,OAAOD,C,CACP,MAAOE,GACP,MAAO,CAAEJ,MAAOI,EAAEC,W,EClBtB,MAAMC,EAAiBC,SAASC,cAAc,YACxCC,EAAkBC,IACtB,MAAMC,EAAmBD,EAAME,KAAIC,GAC1B,iDAEOH,EAAMI,sBAAsBJ,EAAMK,sGAEJL,EAAQM,kEACHN,EAAMO,gEACPP,EAAMQ,iEACRR,EAAMS,4CAMtDb,EAAec,UAAYT,EAAiBU,KAAK,GAAG,EAS/ChC,eAAeiC,GAAW/B,YAAEA,EAAWC,KAAEA,IAC9C,MAAMU,QAAeZ,EAAY,C,YAAEC,E,KAAaC,IAC5CU,EAAOF,MACTuB,MAAMrB,EAAOF,OAVjB,UAAoBE,OAAEA,EAAMV,KAAEA,IAI5B,MAAMgC,EAAWtB,EAAOU,IAAIH,GAC5BH,EAAemB,UAAUD,E,CAQzBE,CAAW,C,OAAExB,E,KAAQV,G,CCvBhBH,eAAesC,IACpB,MAAMC,UAAEA,EAASC,aAAEA,EAAYC,aAAEA,GAAiBvB,SAASwB,gBAE3D,GAAIH,EAAYE,GAAgBD,EAAc,CAC5C,MAAMG,EAAazB,SAASC,cAAc,qBACpChB,EAAOyC,SAASD,EAAWxC,KAAK0C,OACtCF,EAAWxC,KAAK0C,MAAQ1C,EAAO,QACzB2C,WAAW,CAAExC,EAAGqC,EAAWrC,EAAEuC,MAAO1C,KAAMwC,EAAWxC,KAAK0C,O,ECdpE,MAAME,EAAa7B,SAASC,cAAc,gBAE1C4B,EAAWC,iBAAiB,UDFrBhD,eAA+Be,GACpCA,EAAEkC,iBACFlC,EAAEmC,OAAO/C,KAAK0C,MAAQ,IACZ9B,EAAEmC,OAAOhD,YAAY2C,YACzBZ,EAAW,C,YAAE/B,YAAaC,KAAM,K,ICDxC4C,EAAWI,cAAc,IAAIC,MAAM,WAEnCd,IACAe,OAAOL,iBAAiB,SAAUV","sources":["src/config.js","src/gallery-api.js","src/ui.js","src/handlers.js","src/index.js"],"sourcesContent":["export const apiPath = 'https://pixabay.com/api';\nexport const apiKey = '39384649-848b8f3f94b47c16df36e9a5c';\n\nexport const defaultPixabayParams = {\n  key: apiKey,\n  per_page: '40',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: 'true',\n};\n","import { apiPath, defaultPixabayParams } from './config';\nimport axios from 'axios';\nexport default async function pingPixabay({ searchQuery = '', page = '1' }) {\n  try {\n    const queryString = new URLSearchParams({\n      ...defaultPixabayParams,\n      page,\n      q: searchQuery,\n    });\n    const response = await fetch(`${apiPath}?${queryString}`);\n    if (!response.ok) {\n      if (response.status === 400) {\n        return;\n      }\n      return { error: response.status };\n    }\n    const { hits: images } = await response.json();\n    return images;\n  } catch (e) {\n    return { error: e.toString() };\n  }\n}\n","import pingPixabay from './gallery-api';\nconst imageContainer = document.querySelector('.gallery');\nconst getImageElement = image => {\n  const imageElementHTML = image.map(item => {\n    return `\n  <div class=\"photo-card\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n          <p class=\"info-item\"><b>Lubię to:</b> ${image.likes}</p>\n          <p class=\"info-item\"><b>Wyświetlenia:</b> ${image.views}</p>\n          <p class=\"info-item\"><b>Komentarze:</b> ${image.comments}</p>\n          <p class=\"info-item\"><b>Pobrania:</b> ${image.downloads}</p>\n      </div>\n  </div>\n`;\n  });\n\n  imageContainer.innerHTML = imageElementHTML.join('');\n};\nfunction drawImages({ images, page }) {\n  if (page === '1') {\n    // imageContainer.innerHTML = '';\n  }\n  const children = images.map(getImageElement);\n  imageContainer.append(...children);\n}\nexport async function loadImages({ searchQuery, page }) {\n  const images = await pingPixabay({ searchQuery, page });\n  if (images.error) {\n    alert(images.error);\n    return;\n  }\n  drawImages({ images, page });\n  return;\n}\n","import { loadImages } from './ui.js';\n\nexport async function searchForImages(e) {\n  e.preventDefault();\n  e.target.page.value = '1';\n  const q = e.target.searchQuery.value;\n  await loadImages({ searchQuery, page: '1' });\n}\n\nexport async function scrollHandler() {\n  const { scrollTop, scrollHeight, clientHeight } = document.documentElement;\n  // at the bottom of the page\n  if (scrollTop + clientHeight >= scrollHeight) {\n    const searchForm = document.querySelector('#searchPhotosForm');\n    const page = parseInt(searchForm.page.value);\n    searchForm.page.value = page + 1;\n    await loadPhotos({ q: searchForm.q.value, page: searchForm.page.value });\n  }\n}\n","import { searchForImages, scrollHandler } from './handlers.js';\nimport axios from 'axios';\nconst searchForm = document.querySelector('#search-form');\n\nsearchForm.addEventListener('submit', searchForImages);\nsearchForm.dispatchEvent(new Event('submit'));\n\nscrollHandler();\nwindow.addEventListener('scroll', scrollHandler);\n"],"names":["$3449b09e79cd57cb$export$b2715adeff38e66d","key","per_page","image_type","orientation","safesearch","async","$b6d38715e39c009f$export$2e2bcd8739ae039","searchQuery","page","queryString","URLSearchParams","q","response","fetch","ok","status","error","hits","images","json","e","toString","$edb58922828318e9$var$imageContainer","document","querySelector","$edb58922828318e9$var$getImageElement","image","imageElementHTML","map","item","webformatURL","tags","likes","views","comments","downloads","innerHTML","join","$edb58922828318e9$export$211b51324b5b532c","alert","children","append","$edb58922828318e9$var$drawImages","$1ebd615620b2dc52$export$f43482f3c394e174","scrollTop","scrollHeight","clientHeight","documentElement","searchForm","parseInt","value","loadPhotos","$1f0dc3b9307be026$var$searchForm","addEventListener","preventDefault","target","dispatchEvent","Event","window"],"version":3,"file":"index.7f1d0677.js.map"}