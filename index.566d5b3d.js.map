{"mappings":"AAAO,MAGMA,EAAuB,CAClCC,IAHoB,qCAIpBC,SAAU,KACVC,WAAY,QACZC,YAAa,aACbC,WAAY,QCNCC,eAAAC,GAA2BC,YAAEA,EAAc,GAAEC,KAAEA,EAAO,MACnE,IACE,MAAMC,EAAc,IAAIC,gBAAgB,IACnCX,E,KACHS,EACAG,EAAGJ,IAECK,QAAiBC,MAAM,2BAAcJ,KAC3C,IAAKG,EAASE,GAAI,CAChB,GAAwB,MAApBF,EAASG,OACX,OAEF,MAAO,CAAEC,MAAOJ,EAASG,O,CAE3B,MAAQE,KAAMC,SAAiBN,EAASO,OACxC,OAAOD,C,CACP,MAAOE,GACP,MAAO,CAAEJ,MAAOI,EAAEC,W,ECjBtB,MAAMC,EAAkBC,GACf,iDAESA,EAAMC,sBAAsBD,EAAME,sGAEJF,EAAQG,kEACHH,EAAMI,gEACPJ,EAAMK,iEACRL,EAAMM,wCAYjDxB,eAAeyB,GAAWvB,YAAEA,EAAWC,KAAEA,IAC9C,MAAMU,QAAeZ,EAAY,C,YAAEC,E,KAAaC,IAC5CU,EAAOF,MACTe,MAAMb,EAAOF,OAXjB,UAAoBE,OAAEA,EAAMV,KAAEA,IACf,MAATA,IACqBwB,SAASC,cAAc,YAC/BC,UAAY,IAE7B,MAAMC,EAAWjB,EAAOkB,IAAId,GAC5Be,eAAeC,UAAUH,E,CAQzBI,CAAW,C,OAAErB,E,KAAQV,G,CCnBhBH,eAAemC,IACpB,MAAMC,UAAEA,EAASC,aAAEA,EAAYC,aAAEA,GAAiBX,SAASY,gBAE3D,GAAIH,EAAYE,GAAgBD,EAAc,CAC5C,MAAMG,EAAab,SAASC,cAAc,qBACpCzB,EAAOsC,SAASD,EAAWrC,KAAKuC,OACtCF,EAAWrC,KAAKuC,MAAQvC,EAAO,QACzBwC,WAAW,CAAErC,EAAGkC,EAAWlC,EAAEoC,MAAOvC,KAAMqC,EAAWrC,KAAKuC,O,ECdpE,MAAME,EAAajB,SAASC,cAAc,gBAE1CgB,EAAWC,iBAAiB,UDFrB7C,eAA+Be,GACpCA,EAAE+B,iBACF/B,EAAEgC,OAAO5C,KAAKuC,MAAQ,IACZ3B,EAAEgC,OAAO7C,YAAYwC,YACzBjB,EAAW,C,YAAEvB,YAAaC,KAAM,K,ICDxCyC,EAAWI,cAAc,IAAIC,MAAM,WAEnCd,IACAe,OAAOL,iBAAiB,SAAUV","sources":["src/config.js","src/gallery-api.js","src/ui.js","src/handlers.js","src/index.js"],"sourcesContent":["export const apiPath = 'https://pixabay.com/api';\nexport const apiKey = '39384649-848b8f3f94b47c16df36e9a5c';\n\nexport const defaultPixabayParams = {\n  key: apiKey,\n  per_page: '40',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: 'true',\n};\n","import { apiPath, defaultPixabayParams } from './config';\nimport axios from 'axios';\nexport default async function pingPixabay({ searchQuery = '', page = '1' }) {\n  try {\n    const queryString = new URLSearchParams({\n      ...defaultPixabayParams,\n      page,\n      q: searchQuery,\n    });\n    const response = await fetch(`${apiPath}?${queryString}`);\n    if (!response.ok) {\n      if (response.status === 400) {\n        return;\n      }\n      return { error: response.status };\n    }\n    const { hits: images } = await response.json();\n    return images;\n  } catch (e) {\n    return { error: e.toString() };\n  }\n}\n","import pingPixabay from './gallery-api';\n\nconst getImageElement = image => {\n  return `\n  <div class=\"photo-card\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n          <p class=\"info-item\"><b>Lubię to:</b> ${image.likes}</p>\n          <p class=\"info-item\"><b>Wyświetlenia:</b> ${image.views}</p>\n          <p class=\"info-item\"><b>Komentarze:</b> ${image.comments}</p>\n          <p class=\"info-item\"><b>Pobrania:</b> ${image.downloads}</p>\n      </div>\n  </div>`;\n};\nfunction drawImages({ images, page }) {\n  if (page === '1') {\n    const imageContainer = document.querySelector('.gallery');\n    imageContainer.innerHTML = '';\n  }\n  const children = images.map(getImageElement);\n  imageContainer.append(...children);\n}\nexport async function loadImages({ searchQuery, page }) {\n  const images = await pingPixabay({ searchQuery, page });\n  if (images.error) {\n    alert(images.error);\n    return;\n  }\n  drawImages({ images, page });\n  return;\n}\n","import { loadImages } from './ui.js';\n\nexport async function searchForImages(e) {\n  e.preventDefault();\n  e.target.page.value = '1';\n  const q = e.target.searchQuery.value;\n  await loadImages({ searchQuery, page: '1' });\n}\n\nexport async function scrollHandler() {\n  const { scrollTop, scrollHeight, clientHeight } = document.documentElement;\n  // at the bottom of the page\n  if (scrollTop + clientHeight >= scrollHeight) {\n    const searchForm = document.querySelector('#searchPhotosForm');\n    const page = parseInt(searchForm.page.value);\n    searchForm.page.value = page + 1;\n    await loadPhotos({ q: searchForm.q.value, page: searchForm.page.value });\n  }\n}\n","import { searchForImages, scrollHandler } from './handlers.js';\nimport axios from 'axios';\nconst searchForm = document.querySelector('#search-form');\n\nsearchForm.addEventListener('submit', searchForImages);\nsearchForm.dispatchEvent(new Event('submit'));\n\nscrollHandler();\nwindow.addEventListener('scroll', scrollHandler);\n"],"names":["$3449b09e79cd57cb$export$b2715adeff38e66d","key","per_page","image_type","orientation","safesearch","async","$b6d38715e39c009f$export$2e2bcd8739ae039","searchQuery","page","queryString","URLSearchParams","q","response","fetch","ok","status","error","hits","images","json","e","toString","$edb58922828318e9$var$getImageElement","image","webformatURL","tags","likes","views","comments","downloads","$edb58922828318e9$export$211b51324b5b532c","alert","document","querySelector","innerHTML","children","map","imageContainer","append","$edb58922828318e9$var$drawImages","$1ebd615620b2dc52$export$f43482f3c394e174","scrollTop","scrollHeight","clientHeight","documentElement","searchForm","parseInt","value","loadPhotos","$1f0dc3b9307be026$var$searchForm","addEventListener","preventDefault","target","dispatchEvent","Event","window"],"version":3,"file":"index.566d5b3d.js.map"}